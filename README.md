# words

[![Auto merge basic check](https://github.com/brightsole/words/actions/workflows/test.yml/badge.svg)](https://github.com/brightsole/words/actions/workflows/test.yml)
[![Dependabot Updates](https://github.com/brightsole/words/actions/workflows/dependabot/dependabot-updates/badge.svg)](https://github.com/brightsole/words/actions/workflows/dependabot/dependabot-updates)
[![Deploy to Production](https://github.com/brightsole/words/actions/workflows/deploy.yml/badge.svg)](https://github.com/brightsole/words/actions/workflows/deploy.yml)

[development](https://pg7s9i3ui7.execute-api.ap-southeast-2.amazonaws.com/graphql)

[production](https://9odq4mjsql.execute-api.ap-southeast-2.amazonaws.com/graphql)

Our links storage is a naïve solution. we store one word record with a zillion links

a smarter solution _(but ultimately more costly)_ would be to store the links as records, and have the lookup be a StartWith query
then deploying new matching criteria would be a simple lookup miss, and we wouldn't have to manually invalidate anything

the alternative strategy would be to go whole-hog on this, and do the dedupeLinks operation on lookup and store a 1:1 with the query shape
big reads & writes, but ultimately even faster than now

We should **probably** pick a strategy. Sound money says the links method is the right call for a larger scale


<pre>
                      ┌────────────────────────────────────────────────────────────────┐
                      │    <a href="https://github.com/brightsole/jumpingbeen.com">jumpingbeen.com</a>                                             │
                      └─────────────┬─▲────────────────────────────────────────────────┘
                                    │ │
                      ┌───────────────────────────────────────────────────────────┐
                      │    <a href="https://github.com/brightsole/gateway">Federation gateway</a>                                     |
                      │───────────────────────────────────────────────────────────┼───┐
    ┌────────────────►│   DMZ                                                     ◄──┐│
  ┌──────────────────►└───────────────────────────────────────────────────────────┘  ││
  │ │                   ▲                                                      ▲     ││
  │ │                   │                                                      │     ││
  │ │                 ┌─┴────────────────────────────────────────────────────┐ │  ┌──┴▼──────────────────┐
  │ │                 │    <a href="https://github.com/brightsole/solves">Solves service</a>                                    │ │  │ Users service (soon) │
  │ │                 └┬───────────▲───┬─▲────────┬▲────────┬▲───────────────┘ │  └──────────────────────┘
  │ │                  │           │   │ │        ││        ││                 │
  │ │                  │Attempts   │ ┌─▼─┴────┐   ││        ││                 │
  │ │                  │ are       │ ┌────────┐   ││        ││                 │
  │ │                  │memory only│ │  DDB   │   ││        ││                 │
  │ │                  └───────────┘ │ Solves │   ││        ││                 │
  │ │                                └────────┘   ││        ││                 │
  │┌┴─────────────────────────────────────────────▼┴──┐   ┌─▼┴─────────────────┴─────────────────────────┐
  ││    <a href="https://github.com/brightsole/hops">Hops service</a>                                  ├───►<a href="https://github.com/brightsole/games">    Games service</a>                             │
  │└──────▲┬─────────┬─▲─────────┬────────────┬─▲─────◄───┴──┬─▲─────────────────────────────────────────┘
  │       ││         │ │         │            │ │            │ │
  │       ││       ┌─▼─┴───┐     │User      ┌─▼─┴───┐      ┌─▼─┴───┐
  │       ││       ┌───────┐     │Goo       ┌───────┐      ┌───────┐
  │       ││       │  DDB  │     │          │  DDB  │      │  DDB  │
  │       ││       │ Links ├───┐ └─────────►│ Hops  │      │ Games │
  │       ││       └───────┘   └───────────►└───────┘      └───────┘
 ┌┴───────┴▼──────────────────────────────────────────┐
 │    <a href="https://github.com/brightsole/words">Words service</a>                                   * you're here
 └──────┬───────────────────────▲─────┬─▲─────────────┘
        │                       │     │ │
        ├─────►Dictionary api───┤   ┌─▼─┴───┐
        │                       │   ┌───────┐
        ├─────►RiTa package─────┤   │  DDB  │
        │                       │   │ Words │
        └─────►Datamuse api─────┘   └───────┘
</pre>

### TODO
1. sort by most matching overlaps
1. would be really nice to get a performance chart autogenerated somehow
1. would be really nice to tell the queries/mutations if this was a cold start
